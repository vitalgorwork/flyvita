<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FlyVita</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <style>
    body {
      background-color: #053447;
      font-family: 'Poppins', sans-serif;
      padding: 40px;
      margin: 0;
    }

    input, select, button, textarea {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      margin-bottom: 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      font-size: 16px;
    }

    .flyvita-box {
      max-width: 600px;
      margin: 0 auto 40px;
      background-color: #075c63;
      color: white;
      padding: 2em;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }

    .flyvita-box h2 {
      text-align: center;
      font-size: 26px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .flyvita-box p.subtitle {
      text-align: center;
      font-size: 17px;
      margin-bottom: 25px;
      font-weight: 300;
    }

    .flyvita-box ul {
      list-style: none;
      padding: 0;
      margin: 0;
      line-height: 1.7;
      font-size: 15.5px;
    }

    .form-block {
      max-width: 600px;
      margin: 0 auto 40px;
      padding: 2em;
      background: #075c63;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      color: white;
    }

    .form-block h2 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 20px;
      color: white;
    }

    .form-block button {
      width: 50%;
      padding: 18px;
      margin: 35px auto 0;
      display: block;
      background-color: #ffc107;
      color: black;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
    }

    .response-message {
      text-align: center;
      margin-top: 20px;
      font-weight: bold;
      color: white;
    }
  </style>
</head>
<body>

  <div style="text-align: center; margin-bottom: 30px;">
    <img src="flyVitaTransparent.png" alt="FlyVita Logo" style="height: 150px; margin: 10px auto; display: block;" />
  </div>

  <div class="flyvita-box">
    <h2>Welcome to FlyVita</h2>
    <p class="subtitle">Your trusted partner for everything travel</p>
    <ul>
      <li>‚úàÔ∏è <strong>Flights:</strong> First Class, Business, and Economy fares to destinations worldwide</li>
      <li>üè® <strong>Hotels & Resorts:</strong> Handpicked accommodations at unbeatable prices</li>
      <li>üö¢ <strong>Cruises & Tours:</strong> Guided adventures and luxury vacations</li>
      <li>üåê <strong>Full Travel Support:</strong> We handle flights, hotels, transfers, insurance & more</li>
    </ul>
  </div>

  <!-- Travel Request Form -->
  <form id="travelForm" class="form-block">
    <h2>Request a Quote for Your Travel</h2>

    <!-- —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è Request ID -->
    <input type="hidden" name="request_id" id="travel_request_id">

    <label for="city">City for Hotel Booking:</label>
    <input type="text" id="city" name="City" placeholder="e.g., Paris" required />

    <label for="travel-checkin">Check-in Date:</label>
    <input type="text" id="travel-checkin" name="Check-in Date" placeholder="Select date" required />

    <label for="travel-checkout">Check-out Date:</label>
    <input type="text" id="travel-checkout" name="Check-out Date" placeholder="Select date" required />

    <label for="hotelRequest">Hotel Preferences / Room Type:</label>
    <textarea id="hotelRequest" name="Hotel Preferences" placeholder="e.g., 4-star near city center, breakfast included" rows="4"></textarea>

    <label for="travel-name">Your Name:</label>
    <input type="text" id="travel-name" name="name" required placeholder="Full Name" />
    
    <label for="travel-phone">Phone Number:</label>
    <input type="tel" id="travel-phone" name="phone" placeholder="+1 (___) ___-____" />

    <label for="travel-email">Email:</label>
    <input type="email" id="travel-email" name="email" required placeholder="your@example.com" />

    <button type="submit">Submit</button>
    <div id="travelResponseMsg" class="response-message"></div>
  </form>

  <!-- Flight Quote Form -->
  <form id="flightForm" class="form-block">
    <h2>Request a Quote for Your Flight</h2>

    <!-- —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è Request ID -->
    <input type="hidden" name="request_id" id="flight_request_id">

    <label for="from">From:</label>
    <input type="text" id="from" name="from" list="from-list" placeholder="City or Airport" required />
    <datalist id="from-list"></datalist>

    <label for="to">To:</label>
    <input type="text" id="to" name="to" list="to-list" placeholder="City or Airport" required />
    <datalist id="to-list"></datalist>

    <label for="departure-date">Departure Date:</label>
    <input type="text" id="departure-date" name="departure" placeholder="Select date" required />

    <label for="return-date">Return Date:</label>
    <input type="text" id="return-date" name="return" placeholder="Select date" />

    <label for="class">Class:</label>
    <select name="class" required>
      <option>Business</option>
      <option>First</option>
      <option>Premium Economy</option>
      <option>Economy</option>
    </select>

    <label for="flight-name">Your Name:</label>
    <input type="text" id="flight-name" name="name" required placeholder="Full Name" />

    <label for="flight-phone">Phone Number:</label>
    <input type="tel" id="flight-phone" name="phone" placeholder="+1 (___) ___-____" />

    <label for="flight-email">Email:</label>
    <input type="email" id="flight-email" name="email" required placeholder="your@example.com" />

    <button type="submit">Submit</button>
    <div id="flightResponseMsg" class="response-message"></div>
  </form>

  <!-- CONTACT -->
  <div style="max-width: 600px; margin: 30px auto 0; background-color: #075c63; padding: 2em; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.2); text-align: center; color: white;">
    <p style="margin: 10px 0; font-size: 18px;">
      <span style="margin-right: 10px; font-size: 20px; vertical-align: middle; color: white;">
        <i class="fas fa-phone-alt" style="color: white;"></i></span>
      <a href="tel:+16505051070" style="color: white; text-decoration: none;">+1 (650) 505-1070</a>
    </p>
    <p style="margin: 10px 0; font-size: 18px;">
      <span style="margin-right: 10px; font-size: 20px; vertical-align: middle; color: #25D366;">
        <i class="fab fa-whatsapp"></i></span>
      <a href="https://wa.me/16505051070" target="_blank" style="color: white; text-decoration: none;">WhatsApp +1 (650) 505-1070</a>
    </p>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    // === Date pickers ===
    flatpickr("#departure-date", { minDate: "today", dateFormat: "Y-m-d" });
    flatpickr("#return-date", { minDate: "today", dateFormat: "Y-m-d" });
    flatpickr("#travel-checkin", { minDate: "today", dateFormat: "Y-m-d" });
    flatpickr("#travel-checkout", { minDate: "today", dateFormat: "Y-m-d" });

    // === Request ID generator ===
    function genRequestId(prefix = 'FV') {
      const now = new Date();
      const y = now.getFullYear();
      const m = String(now.getMonth() + 1).padStart(2, '0');
      const d = String(now.getDate()).padStart(2, '0');
      const hh = String(now.getHours()).padStart(2, '0');
      const mm = String(now.getMinutes()).padStart(2, '0');
      const ss = String(now.getSeconds()).padStart(2, '0');
      const rand = Math.random().toString(36).slice(2, 6).toUpperCase();
      return `${prefix}-${y}${m}${d}-${hh}${mm}${ss}-${rand}`;
    }

    // === Generic submit handler with Request ID injection ===
    function handleFormSubmit(formId, endpoint, responseContainerId, hiddenIdFieldId) {
      const form = document.getElementById(formId);
      const responseMsg = document.getElementById(responseContainerId);
      const hiddenIdField = document.getElementById(hiddenIdFieldId);
      if (!form || !hiddenIdField) return;

      form.addEventListener('submit', async function (e) {
        e.preventDefault();

        // 1) —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø–∏—Å–∞—Ç—å ID –≤ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ (—É–π–¥–µ—Ç –≤ Formspree)
        const reqId = genRequestId();
        hiddenIdField.value = reqId;

        // 2) —Å–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
        const formData = new FormData(form);
        try {
          const response = await fetch(endpoint, {
            method: 'POST',
            headers: { 'Accept': 'application/json' },
            body: formData
          });

          if (response.ok) {
            responseMsg.innerHTML = `Thank you! Your request has been submitted.<br>Request ID: <strong>${reqId}</strong>`;
            form.reset(); // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã; —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ ID –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏
          } else {
            responseMsg.textContent = 'Error. Please try again later.';
          }
        } catch (error) {
          responseMsg.textContent = 'Error sending request.';
        }
      });
    }

    // === Bind both forms ===
    handleFormSubmit('flightForm', 'https://formspree.io/f/mgvzygnj', 'flightResponseMsg', 'flight_request_id');
    handleFormSubmit('travelForm', 'https://formspree.io/f/mgvzygnj', 'travelResponseMsg', 'travel_request_id');

    // === Simple airport autocomplete ===
    const airports = [
      { "name": "Hartsfield Jackson Atlanta Intl", "city": "Atlanta", "iata": "ATL" },
      { "name": "Los Angeles Intl", "city": "Los Angeles", "iata": "LAX" },
      { "name": "Chicago O'Hare Intl", "city": "Chicago", "iata": "ORD" },
      { "name": "Dallas Fort Worth Intl", "city": "Dallas", "iata": "DFW" },
      { "name": "Denver Intl", "city": "Denver", "iata": "DEN" },
      { "name": "John F Kennedy Intl", "city": "New York", "iata": "JFK" },
      { "name": "San Francisco Intl", "city": "San Francisco", "iata": "SFO" },
      { "name": "Seattle Tacoma Intl", "city": "Seattle", "iata": "SEA" },
      { "name": "McCarran Intl", "city": "Las Vegas", "iata": "LAS" },
      { "name": "Orlando Intl", "city": "Orlando", "iata": "MCO" },
      { "name": "Vladivostok Intl", "city": "Vladivostok", "iata": "VVO" },
      { "name": "Tokyo Haneda", "city": "Tokyo", "iata": "HND" },
      { "name": "Dubai Intl", "city": "Dubai", "iata": "DXB" },
      { "name": "Khabarovsk-Novy Airport", "city": "Khabarovsk", "iata": "KHV" }
    ];

    function autocomplete(inputId, listId) {
      const input = document.getElementById(inputId);
      const datalist = document.getElementById(listId);

      input.addEventListener('input', function () {
        const val = this.value.toLowerCase();
        datalist.innerHTML = '';
        if (val.length < 2) return;

        const filtered = airports.filter(a =>
          a.name.toLowerCase().includes(val) ||
          a.city.toLowerCase().includes(val) ||
          a.iata.toLowerCase().startsWith(val)
        ).slice(0, 10);

        filtered.forEach(a => {
          const option = document.createElement('option');
          option.value = `${a.city} (${a.iata})`;
          datalist.appendChild(option);
        });
      });
    }

    window.onload = () => {
      autocomplete('from', 'from-list');
      autocomplete('to', 'to-list');
    };
  </script>
</body>
</html>
